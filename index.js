!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=1)}([function(e,t,n){e.exports=n(3)(1)},function(e,t,n){e.exports=n(4)},function(e,t,n){},function(e,t){e.exports=vendor_9412f243f58da1d026c8},function(e,t,n){"use strict";n.r(t);n(2);var o=n(0),i=function(e,t){var n,i,r,a,s;void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new o.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:o.MOUSE.ROTATE,MIDDLE:o.MOUSE.DOLLY,RIGHT:o.MOUSE.PAN},this.touches={ONE:o.TOUCH.ROTATE,TWO:o.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.saveState=function(){l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object.zoom},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(c),l.update(),h=p.NONE},this.update=(n=new o.Vector3,i=(new o.Quaternion).setFromUnitVectors(e.up,new o.Vector3(0,1,0)),r=i.clone().inverse(),a=new o.Vector3,s=new o.Quaternion,function(){var e=l.object.position;return n.copy(e).sub(l.target),n.applyQuaternion(i),m.setFromVector3(n),l.autoRotate&&h===p.NONE&&L(2*Math.PI/60/60*l.autoRotateSpeed),l.enableDamping?(m.theta+=_.theta*l.dampingFactor,m.phi+=_.phi*l.dampingFactor):(m.theta+=_.theta,m.phi+=_.phi),m.theta=Math.max(l.minAzimuthAngle,Math.min(l.maxAzimuthAngle,m.theta)),m.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=g,m.radius=Math.max(l.minDistance,Math.min(l.maxDistance,m.radius)),!0===l.enableDamping?l.target.addScaledVector(v,l.dampingFactor):l.target.add(v),n.setFromSpherical(m),n.applyQuaternion(r),e.copy(l.target).add(n),l.object.lookAt(l.target),!0===l.enableDamping?(_.theta*=1-l.dampingFactor,_.phi*=1-l.dampingFactor,v.multiplyScalar(1-l.dampingFactor)):(_.set(0,0,0),v.set(0,0,0)),g=1,!!(b||a.distanceToSquared(l.object.position)>f||8*(1-s.dot(l.object.quaternion))>f)&&(l.dispatchEvent(c),a.copy(l.object.position),s.copy(l.object.quaternion),b=!1,!0)}),this.dispose=function(){l.domElement.removeEventListener("contextmenu",ee,!1),l.domElement.removeEventListener("mousedown",X,!1),l.domElement.removeEventListener("wheel",Z,!1),l.domElement.removeEventListener("touchstart",J,!1),l.domElement.removeEventListener("touchend",$,!1),l.domElement.removeEventListener("touchmove",q,!1),document.removeEventListener("mousemove",Y,!1),document.removeEventListener("mouseup",W,!1),l.domElement.removeEventListener("keydown",Q,!1)};var l=this,c={type:"change"},u={type:"start"},d={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},h=p.NONE,f=1e-6,m=new o.Spherical,_=new o.Spherical,g=1,v=new o.Vector3,b=!1,y=new o.Vector2,w=new o.Vector2,E=new o.Vector2,x=new o.Vector2,T=new o.Vector2,S=new o.Vector2,A=new o.Vector2,O=new o.Vector2,C=new o.Vector2;function R(){return Math.pow(.95,l.zoomSpeed)}function L(e){_.theta-=e}function M(e){_.phi-=e}var k,P=(k=new o.Vector3,function(e,t){k.setFromMatrixColumn(t,0),k.multiplyScalar(-e),v.add(k)}),N=function(){var e=new o.Vector3;return function(t,n){!0===l.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(l.object.up,e)),e.multiplyScalar(t),v.add(e)}}(),H=function(){var e=new o.Vector3;return function(t,n){var o=l.domElement;if(l.object.isPerspectiveCamera){var i=l.object.position;e.copy(i).sub(l.target);var r=e.length();r*=Math.tan(l.object.fov/2*Math.PI/180),P(2*t*r/o.clientHeight,l.object.matrix),N(2*n*r/o.clientHeight,l.object.matrix)}else l.object.isOrthographicCamera?(P(t*(l.object.right-l.object.left)/l.object.zoom/o.clientWidth,l.object.matrix),N(n*(l.object.top-l.object.bottom)/l.object.zoom/o.clientHeight,l.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function I(e){l.object.isPerspectiveCamera?g/=e:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*e)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function D(e){l.object.isPerspectiveCamera?g*=e:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/e)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function F(e){y.set(e.clientX,e.clientY)}function U(e){x.set(e.clientX,e.clientY)}function j(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,n)}}function B(e){if(1==e.touches.length)x.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(t,n)}}function V(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);A.set(0,o)}function G(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,n)}E.subVectors(w,y).multiplyScalar(l.rotateSpeed);var o=l.domElement;L(2*Math.PI*E.x/o.clientHeight),M(2*Math.PI*E.y/o.clientHeight),y.copy(w)}function z(e){if(1==e.touches.length)T.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);T.set(t,n)}S.subVectors(T,x).multiplyScalar(l.panSpeed),H(S.x,S.y),x.copy(T)}function K(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);O.set(0,o),C.set(0,Math.pow(O.y/A.y,l.zoomSpeed)),I(C.y),A.copy(O)}function X(e){if(!1!==l.enabled){var t;switch(e.preventDefault(),l.domElement.focus?l.domElement.focus():window.focus(),e.button){case 0:t=l.mouseButtons.LEFT;break;case 1:t=l.mouseButtons.MIDDLE;break;case 2:t=l.mouseButtons.RIGHT;break;default:t=-1}switch(t){case o.MOUSE.DOLLY:if(!1===l.enableZoom)return;!function(e){A.set(e.clientX,e.clientY)}(e),h=p.DOLLY;break;case o.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===l.enablePan)return;U(e),h=p.PAN}else{if(!1===l.enableRotate)return;F(e),h=p.ROTATE}break;case o.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===l.enableRotate)return;F(e),h=p.ROTATE}else{if(!1===l.enablePan)return;U(e),h=p.PAN}break;default:h=p.NONE}h!==p.NONE&&(document.addEventListener("mousemove",Y,!1),document.addEventListener("mouseup",W,!1),l.dispatchEvent(u))}}function Y(e){if(!1!==l.enabled)switch(e.preventDefault(),h){case p.ROTATE:if(!1===l.enableRotate)return;!function(e){w.set(e.clientX,e.clientY),E.subVectors(w,y).multiplyScalar(l.rotateSpeed);var t=l.domElement;L(2*Math.PI*E.x/t.clientHeight),M(2*Math.PI*E.y/t.clientHeight),y.copy(w),l.update()}(e);break;case p.DOLLY:if(!1===l.enableZoom)return;!function(e){O.set(e.clientX,e.clientY),C.subVectors(O,A),C.y>0?I(R()):C.y<0&&D(R()),A.copy(O),l.update()}(e);break;case p.PAN:if(!1===l.enablePan)return;!function(e){T.set(e.clientX,e.clientY),S.subVectors(T,x).multiplyScalar(l.panSpeed),H(S.x,S.y),x.copy(T),l.update()}(e)}}function W(e){!1!==l.enabled&&(document.removeEventListener("mousemove",Y,!1),document.removeEventListener("mouseup",W,!1),l.dispatchEvent(d),h=p.NONE)}function Z(e){!1===l.enabled||!1===l.enableZoom||h!==p.NONE&&h!==p.ROTATE||(e.preventDefault(),e.stopPropagation(),l.dispatchEvent(u),function(e){e.deltaY<0?D(R()):e.deltaY>0&&I(R()),l.update()}(e),l.dispatchEvent(d))}function Q(e){!1!==l.enabled&&!1!==l.enableKeys&&!1!==l.enablePan&&function(e){var t=!1;switch(e.keyCode){case l.keys.UP:H(0,l.keyPanSpeed),t=!0;break;case l.keys.BOTTOM:H(0,-l.keyPanSpeed),t=!0;break;case l.keys.LEFT:H(l.keyPanSpeed,0),t=!0;break;case l.keys.RIGHT:H(-l.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),l.update())}(e)}function J(e){if(!1!==l.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(l.touches.ONE){case o.TOUCH.ROTATE:if(!1===l.enableRotate)return;j(e),h=p.TOUCH_ROTATE;break;case o.TOUCH.PAN:if(!1===l.enablePan)return;B(e),h=p.TOUCH_PAN;break;default:h=p.NONE}break;case 2:switch(l.touches.TWO){case o.TOUCH.DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(e){l.enableZoom&&V(e),l.enablePan&&B(e)}(e),h=p.TOUCH_DOLLY_PAN;break;case o.TOUCH.DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(e){l.enableZoom&&V(e),l.enableRotate&&j(e)}(e),h=p.TOUCH_DOLLY_ROTATE;break;default:h=p.NONE}break;default:h=p.NONE}h!==p.NONE&&l.dispatchEvent(u)}}function q(e){if(!1!==l.enabled)switch(e.preventDefault(),e.stopPropagation(),h){case p.TOUCH_ROTATE:if(!1===l.enableRotate)return;G(e),l.update();break;case p.TOUCH_PAN:if(!1===l.enablePan)return;z(e),l.update();break;case p.TOUCH_DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(e){l.enableZoom&&K(e),l.enablePan&&z(e)}(e),l.update();break;case p.TOUCH_DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(e){l.enableZoom&&K(e),l.enableRotate&&G(e)}(e),l.update();break;default:h=p.NONE}}function $(e){!1!==l.enabled&&(l.dispatchEvent(d),h=p.NONE)}function ee(e){!1!==l.enabled&&e.preventDefault()}l.domElement.addEventListener("contextmenu",ee,!1),l.domElement.addEventListener("mousedown",X,!1),l.domElement.addEventListener("wheel",Z,!1),l.domElement.addEventListener("touchstart",J,!1),l.domElement.addEventListener("touchend",$,!1),l.domElement.addEventListener("touchmove",q,!1),l.domElement.addEventListener("keydown",Q,!1),-1===l.domElement.tabIndex&&(l.domElement.tabIndex=0),this.update()};(i.prototype=Object.create(o.EventDispatcher.prototype)).constructor=i;var r=function(e,t){i.call(this,e,t),this.mouseButtons.LEFT=o.MOUSE.PAN,this.mouseButtons.RIGHT=o.MOUSE.ROTATE,this.touches.ONE=o.TOUCH.PAN,this.touches.TWO=o.TOUCH.DOLLY_ROTATE};(r.prototype=Object.create(o.EventDispatcher.prototype)).constructor=r;var a=function(){function e(e){o.Loader.call(this,e),this.dracoLoader=null,this.ddsLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(o.Loader.prototype),{constructor:e,load:function(e,t,n,i){var r,a=this;r=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:o.LoaderUtils.extractUrlBase(e),a.manager.itemStart(e);var s=function(t){i?i(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},l=new o.FileLoader(a.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),"use-credentials"===a.crossOrigin&&l.setWithCredentials(!0),l.load(e,(function(n){try{a.parse(n,r,(function(n){t(n),a.manager.itemEnd(e)}),s)}catch(e){s(e)}}),n,s)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(e,t,c,u){var f,g={};if("string"==typeof e)f=e;else if(o.LoaderUtils.decodeText(new Uint8Array(e,0,4))===l){try{g[n.KHR_BINARY_GLTF]=new d(e)}catch(e){return void(u&&u(e))}f=g[n.KHR_BINARY_GLTF].content}else f=o.LoaderUtils.decodeText(new Uint8Array(e));var v=JSON.parse(f);if(void 0===v.asset||v.asset.version[0]<2)u&&u(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(v.extensionsUsed)for(var b=0;b<v.extensionsUsed.length;++b){var y=v.extensionsUsed[b],w=v.extensionsRequired||[];switch(y){case n.KHR_LIGHTS_PUNCTUAL:g[y]=new r(v);break;case n.KHR_MATERIALS_CLEARCOAT:g[y]=new s;break;case n.KHR_MATERIALS_UNLIT:g[y]=new a;break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:g[y]=new m;break;case n.KHR_DRACO_MESH_COMPRESSION:g[y]=new p(v,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:g[y]=new i(this.ddsLoader);break;case n.KHR_TEXTURE_TRANSFORM:g[y]=new h;break;case n.KHR_MESH_QUANTIZATION:g[y]=new _;break;default:w.indexOf(y)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+y+'".')}}new B(v,g,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(c,u)}}});var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function i(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=e}function r(e){this.name=n.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[n.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function a(){this.name=n.KHR_MATERIALS_UNLIT}function s(){this.name=n.KHR_MATERIALS_CLEARCOAT}r.prototype.loadLight=function(e){var t,n=this.lightDefs[e],i=new o.Color(16777215);void 0!==n.color&&i.fromArray(n.color);var r=void 0!==n.range?n.range:0;switch(n.type){case"directional":(t=new o.DirectionalLight(i)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new o.PointLight(i)).distance=r;break;case"spot":(t=new o.SpotLight(i)).distance=r,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,t.angle=n.spot.outerConeAngle,t.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==n.intensity&&(t.intensity=n.intensity),t.name=n.name||"light_"+e,Promise.resolve(t)},a.prototype.getMaterialType=function(){return o.MeshBasicMaterial},a.prototype.extendParams=function(e,t,n){var i=[];e.color=new o.Color(1,1,1),e.opacity=1;var r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){var a=r.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(e,"map",r.baseColorTexture))}return Promise.all(i)},s.prototype.getMaterialType=function(){return o.MeshPhysicalMaterial},s.prototype.extendParams=function(e,t,n){var i=[],r=t.extensions[this.name];if(void 0!==r.clearcoatFactor&&(e.clearcoat=r.clearcoatFactor),void 0!==r.clearcoatTexture&&i.push(n.assignTexture(e,"clearcoatMap",r.clearcoatTexture)),void 0!==r.clearcoatRoughnessFactor&&(e.clearcoatRoughness=r.clearcoatRoughnessFactor),void 0!==r.clearcoatRoughnessTexture&&i.push(n.assignTexture(e,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),void 0!==r.clearcoatNormalTexture&&(i.push(n.assignTexture(e,"clearcoatNormalMap",r.clearcoatNormalTexture)),void 0!==r.clearcoatNormalTexture.scale)){var a=r.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new o.Vector2(a,a)}return Promise.all(i)};var l="glTF",c=1313821514,u=5130562;function d(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,12);if(this.header={magic:o.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==l)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var i=new DataView(e,12),r=0;r<i.byteLength;){var a=i.getUint32(r,!0);r+=4;var s=i.getUint32(r,!0);if(r+=4,s===c){var d=new Uint8Array(e,12+r,a);this.content=o.LoaderUtils.decodeText(d)}else if(s===u){var p=12+r;this.body=e.slice(p,p+a)}r+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function p(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function h(){this.name=n.KHR_TEXTURE_TRANSFORM}function f(e){o.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),s={specular:{value:(new o.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(e){for(var o in s)e.uniforms[o]=s[o];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),e.fragmentShader=e.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_pars_fragment>",t),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_pars_fragment>",n),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_fragment>",i),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_fragment>",r),e.fragmentShader=e.fragmentShader.replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function m(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return f},extendParams:function(e,t,n){var i=t.extensions[this.name];e.color=new o.Color(1,1,1),e.opacity=1;var r=[];if(Array.isArray(i.diffuseFactor)){var a=i.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(void 0!==i.diffuseTexture&&r.push(n.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new o.Color(0,0,0),e.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,e.specular=new o.Color(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var s=i.specularGlossinessTexture;r.push(n.assignTexture(e,"glossinessMap",s)),r.push(n.assignTexture(e,"specularMap",s))}return Promise.all(r)},createMaterial:function(e){var t=new f(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=o.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function _(){this.name=n.KHR_MESH_QUANTIZATION}function g(e,t,n,i){o.Interpolant.call(this,e,t,n,i)}p.prototype.decodePrimitive=function(e,t){var n=this.json,o=this.dracoLoader,i=e.extensions[this.name].bufferView,r=e.extensions[this.name].attributes,a={},s={},l={};for(var c in r){var u=R[c]||c.toLowerCase();a[u]=r[c]}for(c in e.attributes){u=R[c]||c.toLowerCase();if(void 0!==r[c]){var d=n.accessors[e.attributes[c]],p=S[d.componentType];l[u]=p,s[u]=!0===d.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){o.decodeDracoFile(e,(function(e){for(var n in e.attributes){var o=e.attributes[n],i=s[n];void 0!==i&&(o.normalized=i)}t(e)}),a,l)}))}))},h.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},f.prototype=Object.create(o.MeshStandardMaterial.prototype),f.prototype.constructor=f,f.prototype.copy=function(e){return o.MeshStandardMaterial.prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},g.prototype=Object.create(o.Interpolant.prototype),g.prototype.constructor=g,g.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,o=this.valueSize,i=e*o*3+o,r=0;r!==o;r++)t[r]=n[i+r];return t},g.prototype.beforeStart_=g.prototype.copySampleValue_,g.prototype.afterEnd_=g.prototype.copySampleValue_,g.prototype.interpolate_=function(e,t,n,o){for(var i=this.resultBuffer,r=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,c=o-t,u=(n-t)/c,d=u*u,p=d*u,h=e*l,f=h-l,m=-2*p+3*d,_=p-d,g=1-m,v=_-d+u,b=0;b!==a;b++){var y=r[f+b+a],w=r[f+b+s]*c,E=r[h+b+a],x=r[h+b]*c;i[b]=g*y+v*w+m*E+_*x}return i};var v=0,b=1,y=2,w=3,E=4,x=5,T=6,S={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},A={9728:o.NearestFilter,9729:o.LinearFilter,9984:o.NearestMipmapNearestFilter,9985:o.LinearMipmapNearestFilter,9986:o.NearestMipmapLinearFilter,9987:o.LinearMipmapLinearFilter},O={33071:o.ClampToEdgeWrapping,33648:o.MirroredRepeatWrapping,10497:o.RepeatWrapping},C={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},R={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},L={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},M={CUBICSPLINE:void 0,LINEAR:o.InterpolateLinear,STEP:o.InterpolateDiscrete},k="OPAQUE",P="MASK",N="BLEND",H={"image/png":o.RGBAFormat,"image/jpeg":o.RGBFormat};function I(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function D(e,t,n){for(var o in n.extensions)void 0===e[o]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[o]=n.extensions[o])}function F(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function U(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,o=t.weights.length;n<o;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(n=0,o=i.length;n<o;n++)e.morphTargetDictionary[i[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function j(e){for(var t="",n=Object.keys(e).sort(),o=0,i=n.length;o<i;o++)t+=n[o]+":"+e[n[o]]+";";return t}function B(e,n,i){this.json=e||{},this.extensions=n||{},this.options=i||{},this.cache=new t,this.primitiveCache={},this.textureLoader=new o.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new o.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function V(e,t,n){var i=t.attributes,r=[];function a(t,o){return n.getDependency("accessor",t).then((function(t){e.setAttribute(o,t)}))}for(var s in i){var l=R[s]||s.toLowerCase();l in e.attributes||r.push(a(i[s],l))}if(void 0!==t.indices&&!e.index){var c=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));r.push(c)}return F(e,t),function(e,t,n){var i=t.attributes,r=new o.Box3;if(void 0!==i.POSITION){var a=(f=n.json.accessors[i.POSITION]).min,s=f.max;if(void 0!==a&&void 0!==s){r.set(new o.Vector3(a[0],a[1],a[2]),new o.Vector3(s[0],s[1],s[2]));var l=t.targets;if(void 0!==l){for(var c=new o.Vector3,u=new o.Vector3,d=0,p=l.length;d<p;d++){var h=l[d];if(void 0!==h.POSITION){var f;a=(f=n.json.accessors[h.POSITION]).min,s=f.max;void 0!==a&&void 0!==s?(u.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),u.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),u.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),c.max(u)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(c)}e.boundingBox=r;var m=new o.Sphere;r.getCenter(m.center),m.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=m}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(r).then((function(){return void 0!==t.targets?function(e,t,n){for(var o=!1,i=!1,r=0,a=t.length;r<a;r++){if(void 0!==(c=t[r]).POSITION&&(o=!0),void 0!==c.NORMAL&&(i=!0),o&&i)break}if(!o&&!i)return Promise.resolve(e);var s=[],l=[];for(r=0,a=t.length;r<a;r++){var c=t[r];if(o){var u=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;s.push(u)}if(i){u=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;l.push(u)}}return Promise.all([Promise.all(s),Promise.all(l)]).then((function(t){var n=t[0],r=t[1];return o&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=r),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function G(e,t){var n=e.getIndex();if(null===n){var i=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<r.count;a++)i.push(a);e.setIndex(i),n=e.getIndex()}var s=n.count-2,l=[];if(t===o.TriangleFanDrawMode)for(a=1;a<=s;a++)l.push(n.getX(0)),l.push(n.getX(a)),l.push(n.getX(a+1));else for(a=0;a<s;a++)a%2==0?(l.push(n.getX(a)),l.push(n.getX(a+1)),l.push(n.getX(a+2))):(l.push(n.getX(a+2)),l.push(n.getX(a+1)),l.push(n.getX(a)));l.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(l),c}return B.prototype.parse=function(e,t){var n=this,o=this.json,i=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var r={scene:t[0][o.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:o.asset,parser:n,userData:{}};D(i,r,o),F(r,o),e(r)})).catch(t)},B.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],o={},i={},r=0,a=t.length;r<a;r++)for(var s=t[r].joints,l=0,c=s.length;l<c;l++)e[s[l]].isBone=!0;for(var u=0,d=e.length;u<d;u++){var p=e[u];void 0!==p.mesh&&(void 0===o[p.mesh]&&(o[p.mesh]=i[p.mesh]=0),o[p.mesh]++,void 0!==p.skin&&(n[p.mesh].isSkinnedMesh=!0))}this.json.meshReferences=o,this.json.meshUses=i},B.prototype.getDependency=function(e,t){var o=e+":"+t,i=this.cache.get(o);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this.loadMesh(t);break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this.loadBufferView(t);break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this.loadMaterial(t);break;case"texture":i=this.loadTexture(t);break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;case"light":i=this.extensions[n.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(o,i)}return i},B.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,o=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(o.map((function(t,o){return n.getDependency(e,o)}))),this.cache.add(e,t)}return t},B.prototype.loadBuffer=function(e){var t=this.json.buffers[e],o=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(e,n){o.load(I(t.uri,i.path),e,void 0,(function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},B.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,o=t.byteOffset||0;return e.slice(o,o+n)}))},B.prototype.loadAccessor=function(e){var t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then((function(e){var r,a,s=e[0],l=C[i.type],c=S[i.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,p=i.byteOffset||0,h=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,f=!0===i.normalized;if(h&&h!==d){var m=Math.floor(p/h),_="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+m+":"+i.count,g=t.cache.get(_);g||(r=new c(s,m*h,i.count*h/u),g=new o.InterleavedBuffer(r,h/u),t.cache.add(_,g)),a=new o.InterleavedBufferAttribute(g,l,p%h/u,f)}else r=null===s?new c(i.count*l):new c(s,p,i.count*l),a=new o.BufferAttribute(r,l,f);if(void 0!==i.sparse){var v=C.SCALAR,b=S[i.sparse.indices.componentType],y=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,E=new b(e[1],y,i.sparse.count*v),x=new c(e[2],w,i.sparse.count*l);null!==s&&(a=new o.BufferAttribute(a.array.slice(),a.itemSize,a.normalized));for(var T=0,A=E.length;T<A;T++){var O=E[T];if(a.setX(O,x[T*l]),l>=2&&a.setY(O,x[T*l+1]),l>=3&&a.setZ(O,x[T*l+2]),l>=4&&a.setW(O,x[T*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))},B.prototype.loadTexture=function(e){var t,i=this,r=this.json,a=this.options,s=this.textureLoader,l=self.URL||self.webkitURL,c=r.textures[e],u=c.extensions||{},d=(t=u[n.MSFT_TEXTURE_DDS]?r.images[u[n.MSFT_TEXTURE_DDS].source]:r.images[c.source]).uri,p=!1;return void 0!==t.bufferView&&(d=i.getDependency("bufferView",t.bufferView).then((function(e){p=!0;var n=new Blob([e],{type:t.mimeType});return d=l.createObjectURL(n)}))),Promise.resolve(d).then((function(e){var t=a.manager.getHandler(e);return t||(t=u[n.MSFT_TEXTURE_DDS]?i.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:s),new Promise((function(n,o){t.load(I(e,a.path),n,void 0,o)}))})).then((function(e){!0===p&&l.revokeObjectURL(d),e.flipY=!1,c.name&&(e.name=c.name),t.mimeType in H&&(e.format=H[t.mimeType]);var n=(r.samplers||{})[c.sampler]||{};return e.magFilter=A[n.magFilter]||o.LinearFilter,e.minFilter=A[n.minFilter]||o.LinearMipmapLinearFilter,e.wrapS=O[n.wrapS]||o.RepeatWrapping,e.wrapT=O[n.wrapT]||o.RepeatWrapping,e}))},B.prototype.assignTexture=function(e,t,i){var r=this;return this.getDependency("texture",i.index).then((function(a){if(!a.isCompressedTexture)switch(t){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":a.format=o.RGBFormat}if(void 0===i.texCoord||0==i.texCoord||"aoMap"===t&&1==i.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),r.extensions[n.KHR_TEXTURE_TRANSFORM]){var s=void 0!==i.extensions?i.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;s&&(a=r.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(a,s))}e[t]=a}))},B.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,i=void 0!==t.attributes.tangent,r=void 0!==t.attributes.color,a=void 0===t.attributes.normal,s=!0===e.isSkinnedMesh,l=Object.keys(t.morphAttributes).length>0,c=l&&void 0!==t.morphAttributes.normal;if(e.isPoints){var u="PointsMaterial:"+n.uuid,d=this.cache.get(u);d||(d=new o.PointsMaterial,o.Material.prototype.copy.call(d,n),d.color.copy(n.color),d.map=n.map,d.sizeAttenuation=!1,this.cache.add(u,d)),n=d}else if(e.isLine){u="LineBasicMaterial:"+n.uuid;var p=this.cache.get(u);p||(p=new o.LineBasicMaterial,o.Material.prototype.copy.call(p,n),p.color.copy(n.color),this.cache.add(u,p)),n=p}if(i||r||a||s||l){u="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(u+="specular-glossiness:"),s&&(u+="skinning:"),i&&(u+="vertex-tangents:"),r&&(u+="vertex-colors:"),a&&(u+="flat-shading:"),l&&(u+="morph-targets:"),c&&(u+="morph-normals:");var h=this.cache.get(u);h||(h=n.clone(),s&&(h.skinning=!0),i&&(h.vertexTangents=!0),r&&(h.vertexColors=!0),a&&(h.flatShading=!0),l&&(h.morphTargets=!0),c&&(h.morphNormals=!0),this.cache.add(u,h)),n=h}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),n.normalScale&&!i&&(n.normalScale.y=-n.normalScale.y),n.clearcoatNormalScale&&!i&&(n.clearcoatNormalScale.y=-n.clearcoatNormalScale.y),e.material=n},B.prototype.loadMaterial=function(e){var t,i=this.json,r=this.extensions,a=i.materials[e],s={},l=a.extensions||{},c=[];if(l[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=u.getMaterialType(),c.push(u.extendParams(s,a,this))}else if(l[n.KHR_MATERIALS_UNLIT]){var d=r[n.KHR_MATERIALS_UNLIT];t=d.getMaterialType(),c.push(d.extendParams(s,a,this))}else{t=o.MeshStandardMaterial;var p=a.pbrMetallicRoughness||{};if(s.color=new o.Color(1,1,1),s.opacity=1,Array.isArray(p.baseColorFactor)){var h=p.baseColorFactor;s.color.fromArray(h),s.opacity=h[3]}void 0!==p.baseColorTexture&&c.push(this.assignTexture(s,"map",p.baseColorTexture)),s.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,s.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(c.push(this.assignTexture(s,"metalnessMap",p.metallicRoughnessTexture)),c.push(this.assignTexture(s,"roughnessMap",p.metallicRoughnessTexture)))}!0===a.doubleSided&&(s.side=o.DoubleSide);var m=a.alphaMode||k;if(m===N?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,m===P&&(s.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==o.MeshBasicMaterial&&(c.push(this.assignTexture(s,"normalMap",a.normalTexture)),s.normalScale=new o.Vector2(1,1),void 0!==a.normalTexture.scale&&s.normalScale.set(a.normalTexture.scale,a.normalTexture.scale)),void 0!==a.occlusionTexture&&t!==o.MeshBasicMaterial&&(c.push(this.assignTexture(s,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(s.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==o.MeshBasicMaterial&&(s.emissive=(new o.Color).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==o.MeshBasicMaterial&&c.push(this.assignTexture(s,"emissiveMap",a.emissiveTexture)),l[n.KHR_MATERIALS_CLEARCOAT]){var _=r[n.KHR_MATERIALS_CLEARCOAT];t=_.getMaterialType(),c.push(_.extendParams(s,{extensions:l},this))}return Promise.all(c).then((function(){var e;return e=t===f?r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new t(s),a.name&&(e.name=a.name),e.map&&(e.map.encoding=o.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=o.sRGBEncoding),F(e,a),a.extensions&&D(r,e,a),e}))},B.prototype.loadGeometries=function(e){var t=this,i=this.extensions,r=this.primitiveCache;function a(e){return i[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return V(n,e,t)}))}for(var s,l,c=[],u=0,d=e.length;u<d;u++){var p,h=e[u],f=(l=void 0,(l=(s=h).extensions&&s.extensions[n.KHR_DRACO_MESH_COMPRESSION])?"draco:"+l.bufferView+":"+l.indices+":"+j(l.attributes):s.indices+":"+j(s.attributes)+":"+s.mode),m=r[f];if(m)c.push(m.promise);else p=h.extensions&&h.extensions[n.KHR_DRACO_MESH_COMPRESSION]?a(h):V(new o.BufferGeometry,h,t),r[f]={primitive:h,promise:p},c.push(p)}return Promise.all(c)},B.prototype.loadMesh=function(e){for(var t,n=this,i=this.json.meshes[e],r=i.primitives,a=[],s=0,l=r.length;s<l;s++){var c=void 0===r[s].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new o.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:o.FrontSide})),t.DefaultMaterial):this.getDependency("material",r[s].material);a.push(c)}return a.push(n.loadGeometries(r)),Promise.all(a).then((function(t){for(var a=t.slice(0,t.length-1),s=t[t.length-1],l=[],c=0,u=s.length;c<u;c++){var d,p=s[c],h=r[c],f=a[c];if(h.mode===E||h.mode===x||h.mode===T||void 0===h.mode)!0!==(d=!0===i.isSkinnedMesh?new o.SkinnedMesh(p,f):new o.Mesh(p,f)).isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),h.mode===x?d.geometry=G(d.geometry,o.TriangleStripDrawMode):h.mode===T&&(d.geometry=G(d.geometry,o.TriangleFanDrawMode));else if(h.mode===b)d=new o.LineSegments(p,f);else if(h.mode===w)d=new o.Line(p,f);else if(h.mode===y)d=new o.LineLoop(p,f);else{if(h.mode!==v)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);d=new o.Points(p,f)}Object.keys(d.geometry.morphAttributes).length>0&&U(d,i),d.name=i.name||"mesh_"+e,s.length>1&&(d.name+="_"+c),F(d,i),n.assignFinalMaterial(d),l.push(d)}if(1===l.length)return l[0];var m=new o.Group;for(c=0,u=l.length;c<u;c++)m.add(l[c]);return m}))},B.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new o.PerspectiveCamera(o.MathUtils.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new o.OrthographicCamera(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=n.name),F(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},B.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))},B.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],n=[],i=[],r=[],a=[],s=[],l=0,c=t.channels.length;l<c;l++){var u=t.channels[l],d=t.samplers[u.sampler],p=u.target,h=void 0!==p.node?p.node:p.id,f=void 0!==t.parameters?t.parameters[d.input]:d.input,m=void 0!==t.parameters?t.parameters[d.output]:d.output;n.push(this.getDependency("node",h)),i.push(this.getDependency("accessor",f)),r.push(this.getDependency("accessor",m)),a.push(d),s.push(p)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(r),Promise.all(a),Promise.all(s)]).then((function(n){for(var i=n[0],r=n[1],a=n[2],s=n[3],l=n[4],c=[],u=0,d=i.length;u<d;u++){var p=i[u],h=r[u],f=a[u],m=s[u],_=l[u];if(void 0!==p){var v;switch(p.updateMatrix(),p.matrixAutoUpdate=!0,L[_.path]){case L.weights:v=o.NumberKeyframeTrack;break;case L.rotation:v=o.QuaternionKeyframeTrack;break;case L.position:case L.scale:default:v=o.VectorKeyframeTrack}var b=p.name?p.name:p.uuid,y=void 0!==m.interpolation?M[m.interpolation]:o.InterpolateLinear,w=[];L[_.path]===L.weights?p.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&w.push(e.name?e.name:e.uuid)})):w.push(b);var E=f.array;if(f.normalized){var x;if(E.constructor===Int8Array)x=1/127;else if(E.constructor===Uint8Array)x=1/255;else if(E.constructor==Int16Array)x=1/32767;else{if(E.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");x=1/65535}for(var T=new Float32Array(E.length),S=0,A=E.length;S<A;S++)T[S]=E[S]*x;E=T}for(S=0,A=w.length;S<A;S++){var O=new v(w[S]+"."+L[_.path],h.array,E,y);"CUBICSPLINE"===m.interpolation&&(O.createInterpolant=function(e){return new g(this.times,this.values,this.getValueSize()/3,e)},O.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(O)}}}var C=t.name?t.name:"animation_"+e;return new o.AnimationClip(C,void 0,c)}))},B.prototype.loadNode=function(e){var t,i=this.json,r=this.extensions,a=this,s=i.meshReferences,l=i.meshUses,c=i.nodes[e];return(t=[],void 0!==c.mesh&&t.push(a.getDependency("mesh",c.mesh).then((function(e){var t;if(s[c.mesh]>1){var n=l[c.mesh]++;(t=e.clone()).name+="_instance_"+n}else t=e;return void 0!==c.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=c.weights.length;t<n;t++)e.morphTargetInfluences[t]=c.weights[t]})),t}))),void 0!==c.camera&&t.push(a.getDependency("camera",c.camera)),c.extensions&&c.extensions[n.KHR_LIGHTS_PUNCTUAL]&&void 0!==c.extensions[n.KHR_LIGHTS_PUNCTUAL].light&&t.push(a.getDependency("light",c.extensions[n.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(t)).then((function(e){var t;if((t=!0===c.isBone?new o.Bone:e.length>1?new o.Group:1===e.length?e[0]:new o.Object3D)!==e[0])for(var n=0,i=e.length;n<i;n++)t.add(e[n]);if(c.name&&(t.userData.name=c.name,t.name=o.PropertyBinding.sanitizeNodeName(c.name)),F(t,c),c.extensions&&D(r,t,c),void 0!==c.matrix){var a=new o.Matrix4;a.fromArray(c.matrix),t.applyMatrix4(a)}else void 0!==c.translation&&t.position.fromArray(c.translation),void 0!==c.rotation&&t.quaternion.fromArray(c.rotation),void 0!==c.scale&&t.scale.fromArray(c.scale);return t}))},B.prototype.loadScene=function(){function e(t,n,i,r){var a=i.nodes[t];return r.getDependency("node",t).then((function(e){return void 0===a.skin?e:r.getDependency("skin",a.skin).then((function(e){for(var n=[],o=0,i=(t=e).joints.length;o<i;o++)n.push(r.getDependency("node",t.joints[o]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var i=[],r=[],a=0,s=n.length;a<s;a++){var l=n[a];if(l){i.push(l);var c=new o.Matrix4;void 0!==t.inverseBindMatrices&&c.fromArray(t.inverseBindMatrices.array,16*a),r.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}e.bind(new o.Skeleton(i,r),e.matrixWorld)}})),e}));var t})).then((function(t){n.add(t);var o=[];if(a.children)for(var s=a.children,l=0,c=s.length;l<c;l++){var u=s[l];o.push(e(u,t,i,r))}return Promise.all(o)}))}return function(t){var n=this.json,i=this.extensions,r=this.json.scenes[t],a=new o.Group;r.name&&(a.name=r.name),F(a,r),r.extensions&&D(i,a,r);for(var s=r.nodes||[],l=[],c=0,u=s.length;c<u;c++)l.push(e(s[c],a,n,this));return Promise.all(l).then((function(){return a}))}}(),e}();function s(e,t){var n=e.__state.conversionName.toString(),o=Math.round(e.r),i=Math.round(e.g),r=Math.round(e.b),a=e.a,s=Math.round(e.h),l=e.s.toFixed(1),c=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var u=e.hex.toString(16);u.length<6;)u="0"+u;return"#"+u}return"CSS_RGB"===n?"rgb("+o+","+i+","+r+")":"CSS_RGBA"===n?"rgba("+o+","+i+","+r+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+o+","+i+","+r+"]":"RGBA_ARRAY"===n?"["+o+","+i+","+r+","+a+"]":"RGB_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+"}":"RGBA_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+l+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+l+",v:"+c+",a:"+a+"}":"unknown format"}var l=Array.prototype.forEach,c=Array.prototype.slice,u={BREAK:{},extend:function(e){return this.each(c.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))}),this),e},defaults:function(e){return this.each(c.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))}),this),e},compose:function(){var e=c.call(arguments);return function(){for(var t=c.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(l&&e.forEach&&e.forEach===l)e.forEach(t,n);else if(e.length===e.length+0){var o,i=void 0;for(i=0,o=e.length;i<o;i++)if(i in e&&t.call(n,e[i],i)===this.BREAK)return}else for(var r in e)if(t.call(n,e[r],r)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var o=void 0;return function(){var i=this,r=arguments;function a(){o=null,n||e.apply(i,r)}var s=n||!o;clearTimeout(o),o=setTimeout(a,t),s&&e.apply(i,r)}},toArray:function(e){return e.toArray?e.toArray():c.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},d=[{litmus:u.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:s},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:s},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:s},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:s}}},{litmus:u.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:u.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:u.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(u.isNumber(e.r)&&u.isNumber(e.g)&&u.isNumber(e.b)&&u.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(u.isNumber(e.r)&&u.isNumber(e.g)&&u.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(u.isNumber(e.h)&&u.isNumber(e.s)&&u.isNumber(e.v)&&u.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(u.isNumber(e.h)&&u.isNumber(e.s)&&u.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],p=void 0,h=void 0,f=function(){h=!1;var e=arguments.length>1?u.toArray(arguments):arguments[0];return u.each(d,(function(t){if(t.litmus(e))return u.each(t.conversions,(function(t,n){if(p=t.read(e),!1===h&&!1!==p)return h=p,p.conversionName=n,p.conversion=t,u.BREAK})),u.BREAK})),h},m=void 0,_={hsv_to_rgb:function(e,t,n){var o=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),r=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=[[n,s,r],[a,n,r],[r,n,s],[r,a,n],[s,r,n],[n,r,a]][o];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var o=Math.min(e,t,n),i=Math.max(e,t,n),r=i-o,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=e===i?(t-n)/r:t===i?2+(n-e)/r:4+(e-t)/r,(a/=6)<0&&(a+=1),{h:360*a,s:r/i,v:i/255})},rgb_to_hex:function(e,t,n){var o=this.hex_with_component(0,2,e);return o=this.hex_with_component(o,1,t),o=this.hex_with_component(o,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(m=8*t)|e&~(255<<m)}},g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),y=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0},w=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},E=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},x=function(){function e(){if(v(this,e),this.__state=f.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return b(e,[{key:"toString",value:function(){return s(this)}},{key:"toHexString",value:function(){return s(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function T(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||x.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(x.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function S(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||x.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(x.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}x.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=_.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");u.extend(e.__state,_.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},x.recalculateHSV=function(e){var t=_.rgb_to_hsv(e.r,e.g,e.b);u.extend(e.__state,{s:t.s,v:t.v}),u.isNaN(t.h)?u.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},x.COMPONENTS=["r","g","b","h","s","v","hex","a"],T(x.prototype,"r",2),T(x.prototype,"g",1),T(x.prototype,"b",0),S(x.prototype,"h"),S(x.prototype,"s"),S(x.prototype,"v"),Object.defineProperty(x.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(x.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=_.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var A=function(){function e(t,n){v(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return b(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),O={};u.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){u.each(e,(function(e){O[e]=t}))}));var C=/(\d+(\.\d+)?)px/;function R(e){if("0"===e||u.isUndefined(e))return 0;var t=e.match(C);return u.isNull(t)?0:parseFloat(t[1])}var L={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var o=n,i=t;u.isUndefined(i)&&(i=!0),u.isUndefined(o)&&(o=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),o&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,o){var i=n||{},r=O[t];if(!r)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(r);switch(r){case"MouseEvents":var s=i.x||i.clientX||0,l=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,s,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;u.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(t,i.bubbles||!1,i.cancelable||!0)}u.defaults(a,o),e.dispatchEvent(a)},bind:function(e,t,n,o){var i=o||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),L},unbind:function(e,t,n,o){var i=o||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),L},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return L},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),o=n.indexOf(t);-1!==o&&(n.splice(o,1),e.className=n.join(" "))}else e.className=void 0;return L},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return R(t["border-left-width"])+R(t["border-right-width"])+R(t["padding-left"])+R(t["padding-right"])+R(t.width)},getHeight:function(e){var t=getComputedStyle(e);return R(t["border-top-width"])+R(t["border-bottom-width"])+R(t["padding-top"])+R(t["padding-bottom"])+R(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},M=function(e){function t(e,n){v(this,t);var o=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o;return o.__prev=o.getValue(),o.__checkbox=document.createElement("input"),o.__checkbox.setAttribute("type","checkbox"),L.bind(o.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),o.domElement.appendChild(o.__checkbox),o.updateDisplay(),o}return w(t,e),b(t,[{key:"setValue",value:function(e){var n=y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(A),k=function(e){function t(e,n,o){v(this,t);var i=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=o,a=i;if(i.__select=document.createElement("select"),u.isArray(r)){var s={};u.each(r,(function(e){s[e]=e})),r=s}return u.each(r,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)})),i.updateDisplay(),L.bind(i.__select,"change",(function(){var e=this.options[this.selectedIndex].value;a.setValue(e)})),i.domElement.appendChild(i.__select),i}return w(t,e),b(t,[{key:"setValue",value:function(e){var n=y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return L.isActive(this.__select)?this:(this.__select.value=this.getValue(),y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(A),P=function(e){function t(e,n){v(this,t);var o=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o;function r(){i.setValue(i.__input.value)}return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),L.bind(o.__input,"keyup",r),L.bind(o.__input,"change",r),L.bind(o.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),L.bind(o.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return w(t,e),b(t,[{key:"updateDisplay",value:function(){return L.isActive(this.__input)||(this.__input.value=this.getValue()),y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(A);function N(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var H=function(e){function t(e,n,o){v(this,t);var i=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=o||{};return i.__min=r.min,i.__max=r.max,i.__step=r.step,u.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=N(i.__impliedStep),i}return w(t,e),b(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=N(e),this}}]),t}(A);var I=function(e){function t(e,n,o){v(this,t);var i=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));i.__truncationSuspended=!1;var r=i,a=void 0;function s(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}function l(e){var t=a-e.clientY;r.setValue(r.getValue()+t*r.__impliedStep),a=e.clientY}function c(){L.unbind(window,"mousemove",l),L.unbind(window,"mouseup",c),s()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),L.bind(i.__input,"change",(function(){var e=parseFloat(r.__input.value);u.isNaN(e)||r.setValue(e)})),L.bind(i.__input,"blur",(function(){s()})),L.bind(i.__input,"mousedown",(function(e){L.bind(window,"mousemove",l),L.bind(window,"mouseup",c),a=e.clientY})),L.bind(i.__input,"keydown",(function(e){13===e.keyCode&&(r.__truncationSuspended=!0,this.blur(),r.__truncationSuspended=!1,s())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return w(t,e),b(t,[{key:"updateDisplay",value:function(){var e,n,o;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=this.__precision,o=Math.pow(10,n),Math.round(e*o)/o),y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(H);function D(e,t,n,o,i){return o+(e-t)/(n-t)*(i-o)}var F=function(e){function t(e,n,o,i,r){v(this,t);var a=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:o,max:i,step:r})),s=a;function l(e){e.preventDefault();var t=s.__background.getBoundingClientRect();return s.setValue(D(e.clientX,t.left,t.right,s.__min,s.__max)),!1}function c(){L.unbind(window,"mousemove",l),L.unbind(window,"mouseup",c),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function u(e){var t=e.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(D(t,n.left,n.right,s.__min,s.__max))}function d(){L.unbind(window,"touchmove",u),L.unbind(window,"touchend",d),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),L.bind(a.__background,"mousedown",(function(e){document.activeElement.blur(),L.bind(window,"mousemove",l),L.bind(window,"mouseup",c),l(e)})),L.bind(a.__background,"touchstart",(function(e){if(1!==e.touches.length)return;L.bind(window,"touchmove",u),L.bind(window,"touchend",d),u(e)})),L.addClass(a.__background,"slider"),L.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return w(t,e),b(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(H),U=function(e){function t(e,n,o){v(this,t);var i=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===o?"Fire":o,L.bind(i.__button,"click",(function(e){return e.preventDefault(),r.fire(),!1})),L.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return w(t,e),b(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(A),j=function(e){function t(e,n){v(this,t);var o=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.__color=new x(o.getValue()),o.__temp=new x(0);var i=o;o.domElement=document.createElement("div"),L.makeSelectable(o.domElement,!1),o.__selector=document.createElement("div"),o.__selector.className="selector",o.__saturation_field=document.createElement("div"),o.__saturation_field.className="saturation-field",o.__field_knob=document.createElement("div"),o.__field_knob.className="field-knob",o.__field_knob_border="2px solid ",o.__hue_knob=document.createElement("div"),o.__hue_knob.className="hue-knob",o.__hue_field=document.createElement("div"),o.__hue_field.className="hue-field",o.__input=document.createElement("input"),o.__input.type="text",o.__input_textShadow="0 1px 1px ",L.bind(o.__input,"keydown",(function(e){13===e.keyCode&&p.call(this)})),L.bind(o.__input,"blur",p),L.bind(o.__selector,"mousedown",(function(){L.addClass(this,"drag").bind(window,"mouseup",(function(){L.removeClass(i.__selector,"drag")}))})),L.bind(o.__selector,"touchstart",(function(){L.addClass(this,"drag").bind(window,"touchend",(function(){L.removeClass(i.__selector,"drag")}))}));var r,a=document.createElement("div");function s(e){m(e),L.bind(window,"mousemove",m),L.bind(window,"touchmove",m),L.bind(window,"mouseup",c),L.bind(window,"touchend",c)}function l(e){_(e),L.bind(window,"mousemove",_),L.bind(window,"touchmove",_),L.bind(window,"mouseup",d),L.bind(window,"touchend",d)}function c(){L.unbind(window,"mousemove",m),L.unbind(window,"touchmove",m),L.unbind(window,"mouseup",c),L.unbind(window,"touchend",c),h()}function d(){L.unbind(window,"mousemove",_),L.unbind(window,"touchmove",_),L.unbind(window,"mouseup",d),L.unbind(window,"touchend",d),h()}function p(){var e=f(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function h(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function m(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,o=n.clientX,r=n.clientY,a=(o-t.left)/(t.right-t.left),s=1-(r-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),i.__color.v=s,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function _(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return u.extend(o.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),u.extend(o.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:o.__field_knob_border+(o.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),u.extend(o.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),u.extend(o.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),u.extend(a.style,{width:"100%",height:"100%",background:"none"}),V(a,"top","rgba(0,0,0,0)","#000"),u.extend(o.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(r=o.__hue_field).style.background="",r.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",r.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",r.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",r.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",r.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",u.extend(o.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:o.__input_textShadow+"rgba(0,0,0,0.7)"}),L.bind(o.__saturation_field,"mousedown",s),L.bind(o.__saturation_field,"touchstart",s),L.bind(o.__field_knob,"mousedown",s),L.bind(o.__field_knob,"touchstart",s),L.bind(o.__hue_field,"mousedown",l),L.bind(o.__hue_field,"touchstart",l),o.__saturation_field.appendChild(a),o.__selector.appendChild(o.__field_knob),o.__selector.appendChild(o.__saturation_field),o.__selector.appendChild(o.__hue_field),o.__hue_field.appendChild(o.__hue_knob),o.domElement.appendChild(o.__input),o.domElement.appendChild(o.__selector),o.updateDisplay(),o}return w(t,e),b(t,[{key:"updateDisplay",value:function(){var e=f(this.getValue());if(!1!==e){var t=!1;u.each(x.COMPONENTS,(function(n){if(!u.isUndefined(e[n])&&!u.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&u.extend(this.__color.__state,e)}u.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,o=255-n;u.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,V(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),u.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}}]),t}(A),B=["-moz-","-o-","-webkit-","-ms-",""];function V(e,t,n,o){e.style.background="",u.each(B,(function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+o+" 100%); "}))}var G=function(e,t){var n=t||document,o=document.createElement("style");o.type="text/css",o.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(o)}catch(e){}},z='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',K=function(e,t){var n=e[t];return u.isArray(arguments[2])||u.isObject(arguments[2])?new k(e,t,arguments[2]):u.isNumber(n)?u.isNumber(arguments[2])&&u.isNumber(arguments[3])?u.isNumber(arguments[4])?new F(e,t,arguments[2],arguments[3],arguments[4]):new F(e,t,arguments[2],arguments[3]):u.isNumber(arguments[4])?new I(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new I(e,t,{min:arguments[2],max:arguments[3]}):u.isString(n)?new P(e,t):u.isFunction(n)?new U(e,t,""):u.isBoolean(n)?new M(e,t):null};var X=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},Y=function(){function e(){v(this,e),this.backgroundElement=document.createElement("div"),u.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),L.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),u.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;L.bind(this.backgroundElement,"click",(function(){t.hide()}))}return b(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),u.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",L.unbind(e.domElement,"webkitTransitionEnd",t),L.unbind(e.domElement,"transitionend",t),L.unbind(e.domElement,"oTransitionEnd",t)};L.bind(this.domElement,"webkitTransitionEnd",t),L.bind(this.domElement,"transitionend",t),L.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-L.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-L.getHeight(this.domElement)/2+"px"}}]),e}();G(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var W=function(){try{return!!window.localStorage}catch(e){return!1}}(),Z=void 0,Q=!0,J=void 0,q=!1,$=[],ee=function e(t){var n=this,o=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),L.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],o=u.defaults(o,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),o=u.defaults(o,{resizable:o.autoPlace,hideable:o.autoPlace}),u.isUndefined(o.load)?o.load={preset:"Default"}:o.preset&&(o.load.preset=o.preset),u.isUndefined(o.parent)&&o.hideable&&$.push(this),o.resizable=u.isUndefined(o.parent)&&o.resizable,o.autoPlace&&u.isUndefined(o.scrollable)&&(o.scrollable=!0);var i,r=W&&"true"===localStorage.getItem(ae(this,"isLocal")),a=void 0,s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return o.parent}},scrollable:{get:function(){return o.scrollable}},autoPlace:{get:function(){return o.autoPlace}},closeOnTop:{get:function(){return o.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:o.load.preset},set:function(e){n.parent?n.getRoot().preset=e:o.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return o.width},set:function(e){o.width=e,de(n,e)}},name:{get:function(){return o.name},set:function(e){o.name=e,s&&(s.innerHTML=o.name)}},closed:{get:function(){return o.closed},set:function(t){o.closed=t,o.closed?L.addClass(n.__ul,e.CLASS_CLOSED):L.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return o.load}},useLocalStorage:{get:function(){return r},set:function(e){W&&(r=e,e?L.bind(window,"unload",a):L.unbind(window,"unload",a),localStorage.setItem(ae(n,"isLocal"),e))}}}),u.isUndefined(o.parent)){if(this.closed=o.closed||!1,L.addClass(this.domElement,e.CLASS_MAIN),L.makeSelectable(this.domElement,!1),W&&r){n.useLocalStorage=!0;var l=localStorage.getItem(ae(this,"gui"));l&&(o.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,L.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),o.closeOnTop?(L.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(L.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),L.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===o.closed&&(o.closed=!0);var c=document.createTextNode(o.name);L.addClass(c,"controller-name"),s=te(n,c);L.addClass(this.__ul,e.CLASS_CLOSED),L.addClass(s,"title"),L.bind(s,"click",(function(e){return e.preventDefault(),n.closed=!n.closed,!1})),o.closed||(this.closed=!1)}o.autoPlace&&(u.isUndefined(o.parent)&&(Q&&(J=document.createElement("div"),L.addClass(J,"dg"),L.addClass(J,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(J),Q=!1),J.appendChild(this.domElement),L.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||de(n,o.width)),this.__resizeHandler=function(){n.onResizeDebounced()},L.bind(window,"resize",this.__resizeHandler),L.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),L.bind(this.__ul,"transitionend",this.__resizeHandler),L.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),o.resizable&&ue(this),a=function(){W&&"true"===localStorage.getItem(ae(n,"isLocal"))&&localStorage.setItem(ae(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,o.parent||((i=n.getRoot()).width+=1,u.defer((function(){i.width-=1})))};function te(e,t,n){var o=document.createElement("li");return t&&o.appendChild(t),n?e.__ul.insertBefore(o,n):e.__ul.appendChild(o),e.onResize(),o}function ne(e){L.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&L.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function oe(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function ie(e,t){var n=e.getRoot(),o=n.__rememberedObjects.indexOf(t.object);if(-1!==o){var i=n.__rememberedObjectIndecesToControllers[o];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[o]=i),i[t.property]=t,n.load&&n.load.remembered){var r=n.load.remembered,a=void 0;if(r[e.preset])a=r[e.preset];else{if(!r.Default)return;a=r.Default}if(a[o]&&void 0!==a[o][t.property]){var s=a[o][t.property];t.initialValue=s,t.setValue(s)}}}}function re(e,t,n,o){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(o.color)i=new j(t,n);else{var r=[t,n].concat(o.factoryArgs);i=K.apply(e,r)}o.before instanceof A&&(o.before=o.before.__li),ie(e,i),L.addClass(i.domElement,"c");var a=document.createElement("span");L.addClass(a,"property-name"),a.innerHTML=i.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(i.domElement);var l=te(e,s,o.before);return L.addClass(l,ee.CLASS_CONTROLLER_ROW),i instanceof j?L.addClass(l,"color"):L.addClass(l,g(i.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,u.extend(n,{options:function(t){if(arguments.length>1){var o=n.__li.nextElementSibling;return n.remove(),re(e,n.object,n.property,{before:o,factoryArgs:[u.toArray(arguments)]})}if(u.isArray(t)||u.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),re(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof F){var o=new I(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});u.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],i=o[e];n[e]=o[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(o,e),t.apply(n,e)}})),L.addClass(t,"has-slider"),n.domElement.insertBefore(o.domElement,n.domElement.firstElementChild)}else if(n instanceof I){var i=function(t){if(u.isNumber(n.__min)&&u.isNumber(n.__max)){var o=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var r=re(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return r.name(o),i&&r.listen(),r}return t};n.min=u.compose(i,n.min),n.max=u.compose(i,n.max)}else n instanceof M?(L.bind(t,"click",(function(){L.fakeEvent(n.__checkbox,"click")})),L.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof U?(L.bind(t,"click",(function(){L.fakeEvent(n.__button,"click")})),L.bind(t,"mouseover",(function(){L.addClass(n.__button,"hover")})),L.bind(t,"mouseout",(function(){L.removeClass(n.__button,"hover")}))):n instanceof j&&(L.addClass(t,"color"),n.updateDisplay=u.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=u.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&oe(e.getRoot(),!0),t}),n.setValue)}(e,l,i),e.__controllers.push(i),i}function ae(e,t){return document.location.href+"."+t}function se(e,t,n){var o=document.createElement("option");o.innerHTML=t,o.value=t,e.__preset_select.appendChild(o),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function le(e,t){t.style.display=e.useLocalStorage?"block":"none"}function ce(e){var t=e.__save_row=document.createElement("li");L.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),L.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",L.addClass(n,"button gears");var o=document.createElement("span");o.innerHTML="Save",L.addClass(o,"button"),L.addClass(o,"save");var i=document.createElement("span");i.innerHTML="New",L.addClass(i,"button"),L.addClass(i,"save-as");var r=document.createElement("span");r.innerHTML="Revert",L.addClass(r,"button"),L.addClass(r,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?u.each(e.load.remembered,(function(t,n){se(e,n,n===e.preset)})):se(e,"Default",!1),L.bind(a,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(a),t.appendChild(n),t.appendChild(o),t.appendChild(i),t.appendChild(r),W){var s=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(ae(0,"isLocal"))&&l.setAttribute("checked","checked"),le(e,s),L.bind(l,"change",(function(){e.useLocalStorage=!e.useLocalStorage,le(e,s)}))}var c=document.getElementById("dg-new-constructor");L.bind(c,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||Z.hide()})),L.bind(n,"click",(function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),Z.show(),c.focus(),c.select()})),L.bind(o,"click",(function(){e.save()})),L.bind(i,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),L.bind(r,"click",(function(){e.revert()}))}function ue(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function o(){L.removeClass(e.__closeButton,ee.CLASS_DRAG),L.unbind(window,"mousemove",n),L.unbind(window,"mouseup",o)}function i(i){return i.preventDefault(),t=i.clientX,L.addClass(e.__closeButton,ee.CLASS_DRAG),L.bind(window,"mousemove",n),L.bind(window,"mouseup",o),!1}e.__resize_handle=document.createElement("div"),u.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),L.bind(e.__resize_handle,"mousedown",i),L.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function de(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function pe(e,t){var n={};return u.each(e.__rememberedObjects,(function(o,i){var r={},a=e.__rememberedObjectIndecesToControllers[i];u.each(a,(function(e,n){r[n]=t?e.initialValue:e.getValue()})),n[i]=r})),n}ee.toggleHide=function(){q=!q,u.each($,(function(e){e.domElement.style.display=q?"none":""}))},ee.CLASS_AUTO_PLACE="a",ee.CLASS_AUTO_PLACE_CONTAINER="ac",ee.CLASS_MAIN="main",ee.CLASS_CONTROLLER_ROW="cr",ee.CLASS_TOO_TALL="taller-than-window",ee.CLASS_CLOSED="closed",ee.CLASS_CLOSE_BUTTON="close-button",ee.CLASS_CLOSE_TOP="close-top",ee.CLASS_CLOSE_BOTTOM="close-bottom",ee.CLASS_DRAG="drag",ee.DEFAULT_WIDTH=245,ee.TEXT_CLOSED="Close Controls",ee.TEXT_OPEN="Open Controls",ee._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||ee.toggleHide()},L.bind(window,"keydown",ee._keydownHandler,!1),u.extend(ee.prototype,{add:function(e,t){return re(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return re(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;u.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&J.removeChild(this.domElement);var e=this;u.each(this.__folders,(function(t){e.removeFolder(t)})),L.unbind(window,"keydown",ee._keydownHandler,!1),ne(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new ee(t);this.__folders[e]=n;var o=te(this,n.domElement);return L.addClass(o,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],ne(e);var t=this;u.each(e.__folders,(function(t){e.removeFolder(t)})),u.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=L.getOffset(e.__ul).top,n=0;u.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=L.getHeight(t))})),window.innerHeight-t-20<n?(L.addClass(e.domElement,ee.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(L.removeClass(e.domElement,ee.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&u.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:u.debounce((function(){this.onResize()}),50),remember:function(){if(u.isUndefined(Z)&&((Z=new Y).domElement.innerHTML=z),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;u.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&ce(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&de(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=pe(this)),e.folders={},u.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=pe(this),oe(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=pe(this,!0)),this.load.remembered[e]=pe(this),this.preset=e,se(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){u.each(this.__controllers,(function(t){this.getRoot().load.remembered?ie(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),u.each(this.__folders,(function(e){e.revert(e)})),e||oe(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&X.call(window,(function(){e(t)}));u.each(t,(function(e){e.updateDisplay()}))}(this.__listening)},updateDisplay:function(){u.each(this.__controllers,(function(e){e.updateDisplay()})),u.each(this.__folders,(function(e){e.updateDisplay()}))}});var he=ee,fe=new o.AxesHelper(10),me=new o.GridHelper(10,5);(new he).add({isGuide:!1},"isGuide").onChange((function(e){e?(ve.add(fe),ve.add(me)):(ve.remove(fe),ve.remove(me))}));var _e=new o.WebGLRenderer;_e.setPixelRatio(window.devicePixelRatio),_e.setSize(960,540);var ge=document.getElementById("app");null==ge||ge.appendChild(_e.domElement);var ve=new o.Scene,be=new o.PerspectiveCamera(45,960/540,1,1e4);be.position.set(0,0,5);var ye=new o.DirectionalLight(16777215);ye.intensity=3,ye.position.set(.5,0,1),ve.add(ye);var we=new o.DirectionalLight(16777215);we.intensity=3,we.position.set(.5,0,-1),ve.add(we);var Ee=new i(be,_e.domElement);Ee.enableDamping=!0,Ee.dampingFactor=.2,(new a).load("./models/star.glb",(function(e){e.scene.rotateX(Math.PI/2),e.scene.rotateY(Math.PI),ve.add(e.scene)}),(function(e){console.log(e)}),(function(e){console.error(e)})),function e(){Ee.update(),_e.render(ve,be),requestAnimationFrame(e)}()}]);